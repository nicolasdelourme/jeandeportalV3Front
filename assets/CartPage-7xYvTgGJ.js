import{A as e,a as s,G as t,I as a,H as r,U as l,Q as o,u as i,K as n,W as c,L as u,V as d,F as m,Z as f,ad as p}from"./vue-vendor-BHZkLje3.js";import{f as v}from"./index-BamJDk-5.js";import{b as g,c as y,d as _,F as x,o as h,e as b}from"./DefaultLayout.vue_vue_type_script_setup_true_lang-Br6uEOr3.js";import{_ as w}from"./Card.vue_vue_type_script_setup_true_lang-BImqj4dv.js";import{_ as C}from"./CardContent.vue_vue_type_script_setup_true_lang-CzZI-ZF8.js";import{_ as k,a as j}from"./CardTitle.vue_vue_type_script_setup_true_lang-CCW9Rm4y.js";import{_ as T}from"./AspectRatio.vue_vue_type_script_setup_true_lang-CQwfCPqO.js";import"./ui-vendor-Dpzf4R5k.js";const z={class:"min-h-screen bg-gray-50"},L={class:"max-w-4xl mx-auto px-4 py-10"},P={key:0,class:"py-16"},V={key:1,class:"grid lg:grid-cols-3 gap-8"},H={class:"lg:col-span-2 space-y-4"},R={class:"flex items-center justify-between mb-2"},A={class:"text-sm text-muted-foreground mt-1"},I={class:"flex items-center gap-2"},F={class:"w-32 shrink-0"},q=["src","alt"],D={class:"flex-1 flex flex-col justify-between min-w-0"},E={class:"text-sm font-semibold text-foreground truncate"},B={class:"mt-1"},K={class:"text-sm text-muted-foreground line-through mr-2"},U={class:"text-lg font-bold text-secondary"},G={key:1,class:"text-lg font-bold text-secondary"},M={class:"text-xs text-muted-foreground mt-0.5"},N={class:"flex items-center justify-end"},Q={class:"lg:col-span-1"},S={class:"space-y-3"},W={class:"flex justify-between text-sm"},Z={class:"text-muted-foreground"},$={class:"font-medium"},J={class:"text-muted-foreground"},O={class:"font-medium"},X={class:"flex justify-between font-bold text-lg"},Y={class:"text-secondary"},ee=e({__name:"CartPage",setup(e){const ee=p(),se=v(),te=s(()=>({shoppingCart:g.fas?.["shopping-cart"],trash:g.fas?.trash,creditCard:g.fas?.["credit-card"],arrowLeft:g.fas?.["arrow-left"]}));function ae(e){return new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(e)}async function re(){if(confirm("Voulez-vous vraiment vider le panier ?"))try{await se.clearCart()}catch(e){}}function le(){ee.push("/boutique")}function oe(){ee.push("/commander")}return(e,s)=>(r(),t(y,null,{default:a(()=>[l("div",z,[l("section",L,[i(se).isEmpty?(r(),o("div",P,[n(i(h),{title:"Votre panier est vide",description:"Découvrez nos produits et ajoutez-les à votre panier pour commencer."},{icon:a(()=>[te.value.shoppingCart?(r(),t(i(x),{key:0,icon:te.value.shoppingCart,class:"w-full h-full"},null,8,["icon"])):u("",!0)]),action:a(()=>[n(i(_),{variant:"secondary",size:"lg",rounded:"lg",onClick:le},{default:a(()=>[...s[0]||(s[0]=[c(" Découvrir la boutique ",-1)])]),_:1})]),_:1})])):(r(),o("div",V,[l("div",H,[l("div",R,[l("div",null,[s[1]||(s[1]=l("h1",{class:"text-2xl font-bold font-heading text-foreground"},"Mon panier",-1)),l("p",A,d(i(se).itemCount)+" "+d(i(se).itemCount>1?"produits":"produit"),1)]),l("div",I,[n(i(_),{variant:"ghost",color:"secondary",size:"sm",class:"text-destructive hover:text-destructive",onClick:re},{default:a(()=>[te.value.trash?(r(),t(i(x),{key:0,icon:te.value.trash,class:"h-3.5 w-3.5 mr-1.5"},null,8,["icon"])):u("",!0),s[2]||(s[2]=c(" Vider ",-1))]),_:1}),n(i(_),{variant:"ghost",color:"secondary",size:"sm",onClick:le},{default:a(()=>[te.value.arrowLeft?(r(),t(i(x),{key:0,icon:te.value.arrowLeft,class:"h-4 w-4 mr-1.5"},null,8,["icon"])):u("",!0),s[3]||(s[3]=c(" Boutique ",-1))]),_:1})])]),(r(!0),o(m,null,f(i(se).items,e=>(r(),t(i(w),{key:e.itemId,class:"border-secondary rounded-lg p-0"},{default:a(()=>[n(i(C),{class:"p-3 flex gap-4 items-stretch"},{default:a(()=>[l("div",F,[n(i(T),{ratio:1,class:"bg-muted rounded-lg overflow-hidden"},{default:a(()=>[e.images&&e.images[0]?(r(),o("img",{key:0,src:e.images[0],alt:e.name,class:"w-full h-full object-contain"},null,8,q)):u("",!0)]),_:2},1024)]),l("div",D,[l("div",null,[l("h3",E,d(e.name),1),l("p",B,[e.discountPrice&&e.discountPrice>0&&e.discountPrice!==e.price?(r(),o(m,{key:0},[l("span",K,d(ae(e.price)),1),l("span",U,d(ae(e.discountPrice)),1)],64)):(r(),o("span",G,d(ae(e.price)),1))]),l("p",M," HT: "+d(ae(e.discountPriceHT&&e.discountPriceHT>0?e.discountPriceHT:e.priceHT))+" · TVA "+d(e.vatRate)+"% ",1)]),l("div",N,[n(i(_),{disabled:i(se).isLoading,variant:"ghost",size:"sm",class:"text-destructive hover:text-destructive h-7 px-2",onClick:s=>async function(e,s){if(confirm(`Voulez-vous vraiment retirer "${s}" du panier ?`))try{await se.removeItem(e)}catch(t){}}(e.itemId,e.name)},{default:a(()=>[te.value.trash?(r(),t(i(x),{key:0,icon:te.value.trash,class:"h-3.5 w-3.5 mr-1.5"},null,8,["icon"])):u("",!0),s[4]||(s[4]=c(" Retirer ",-1))]),_:1},8,["disabled","onClick"])])])]),_:2},1024)]),_:2},1024))),128))]),l("div",Q,[n(i(w),{class:"sticky top-24 border-0"},{default:a(()=>[n(i(k),null,{default:a(()=>[n(i(j),null,{default:a(()=>[...s[5]||(s[5]=[c("Résumé",-1)])]),_:1})]),_:1}),n(i(C),{class:"space-y-4"},{default:a(()=>[l("div",S,[l("div",W,[l("span",Z,"Sous-total HT ("+d(i(se).itemCount)+" "+d(i(se).itemCount>1?"produits":"produit")+")",1),l("span",$,d(ae(i(se).subtotalExclVAT)),1)]),(r(!0),o(m,null,f(i(se).vatByRate,(e,s)=>(r(),o("div",{key:s,class:"flex justify-between text-sm"},[l("span",J,"TVA "+d(s)+"%",1),l("span",O,d(ae(e)),1)]))),128)),n(i(b)),l("div",X,[s[6]||(s[6]=l("span",null,"Total TTC",-1)),l("span",Y,d(ae(i(se).subtotal)),1)]),s[7]||(s[7]=l("p",{class:"text-xs text-muted-foreground"}," Les frais de livraison seront calculés à l'étape suivante ",-1))]),n(i(_),{size:"lg",class:"w-full bg-success hover:bg-success/90 text-success-foreground",rounded:"lg",onClick:oe},{default:a(()=>[te.value.creditCard?(r(),t(i(x),{key:0,icon:te.value.creditCard,class:"w-5 h-5 mr-2"},null,8,["icon"])):u("",!0),s[8]||(s[8]=c(" Commander ",-1))]),_:1}),n(i(_),{class:"w-full hover:bg-secondary hover:border-secondary",rounded:"lg",color:"secondary",variant:"outline",size:"sm",onClick:le},{default:a(()=>[te.value.arrowLeft?(r(),t(i(x),{key:0,icon:te.value.arrowLeft,class:"w-3.5 h-3.5 mr-1.5"},null,8,["icon"])):u("",!0),s[9]||(s[9]=c(" Continuer mes achats ",-1))]),_:1})]),_:1})]),_:1})])]))])])]),_:1}))}});export{ee as default};
