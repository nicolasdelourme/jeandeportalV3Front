import{A as e,a as s,l as a,ad as t,G as l,I as n,H as o,U as i,K as r,L as u,W as c,u as d,V as f,N as m,Q as p,Z as v,D as _,F as b}from"./vue-vendor-BHZkLje3.js";import{t as y,l as x}from"./index-BamJDk-5.js";import{t as g,o as h,b as C,s as k,e as w,u as R,F as j}from"./form-vendor-D_96SOpp.js";import{b as q,c as L,F as V,d as z,_ as A,e as D}from"./DefaultLayout.vue_vue_type_script_setup_true_lang-Br6uEOr3.js";import{_ as P}from"./Card.vue_vue_type_script_setup_true_lang-BImqj4dv.js";import{_ as F}from"./CardContent.vue_vue_type_script_setup_true_lang-CzZI-ZF8.js";import{_ as S}from"./CardDescription.vue_vue_type_script_setup_true_lang-Cw5K8ggb.js";import{a as M,_ as N}from"./CardTitle.vue_vue_type_script_setup_true_lang-CCW9Rm4y.js";import{_ as B,a as T,b as G,c as J}from"./FormMessage.vue_vue_type_script_setup_true_lang-DUUurZV1.js";import"./ui-vendor-Dpzf4R5k.js";import"./Label.vue_vue_type_script_setup_true_lang-BNDbxbZU.js";const K={too_expensive:"Trop cher",not_enough_use:"Je ne l'utilise pas assez",found_alternative:"J'ai trouvé une alternative",technical_issues:"Problèmes techniques",changing_needs:"Mes besoins ont changé",other:"Autre raison"},U={class:"container max-w-3xl mx-auto py-8 px-4"},$={class:"mb-6"},H={class:"mb-8"},I={class:"flex items-center justify-between mb-2"},Q={class:"text-sm font-medium"},W={class:"text-sm text-muted-foreground"},X={class:"w-full bg-gray-200 rounded-full h-2"},Y={class:"bg-neutral-50 rounded-lg p-4 space-y-3"},Z={class:"flex items-center justify-between"},E={class:"font-medium",style:{"font-family":"Roboto, sans-serif"}},O={class:"space-y-2 text-sm"},ee={class:"flex justify-between"},se={class:"font-medium"},ae={class:"flex justify-between"},te={class:"font-medium"},le={class:"flex justify-between"},ne={class:"font-medium"},oe={class:"space-y-3"},ie={class:"space-y-2"},re={class:"flex items-start gap-3"},ue={class:"text-sm"},ce={class:"flex items-start gap-3"},de={class:"flex items-start gap-3"},fe={class:"flex gap-3 pt-4"},me={class:"space-y-3"},pe=["id","value"],ve=["for"],_e={class:"flex gap-3 pt-4"},be={class:"bg-amber-50 border border-amber-200 rounded-lg p-4"},ye={class:"flex gap-3"},xe={class:"flex-1 space-y-2"},ge={class:"text-sm text-amber-800"},he={class:"space-y-3"},Ce={class:"bg-neutral-50 rounded-lg p-4 space-y-2 text-sm"},ke={class:"font-medium"},we={key:0},Re={class:"mt-1 text-neutral-700"},je={class:"flex gap-3 pt-4"},qe=e({__name:"CancelSubscription",setup(e){const qe=t(),Le=s(()=>({arrowLeft:q.fas?.["arrow-left"],arrowRight:q.fas?.["arrow-right"],timesCircle:q.fas?.["times-circle"],infoCircle:q.fas?.["info-circle"],check:q.fas?.check})),Ve=e=>Le.value[e],ze=a(1),Ae=a({plan:"Premium",themeName:"Métaux Précieux",quantity:3,price:75,nextBillingDate:"2025-12-10"}),De=g(h({reason:w(["too_expensive","not_enough_use","found_alternative","technical_issues","changing_needs","other"],{required_error:"Veuillez sélectionner une raison"}),feedback:k().optional(),immediateCancel:C().default(!1)})),{handleSubmit:Pe,values:Fe}=R({validationSchema:De,initialValues:{immediateCancel:!1}}),Se=()=>{ze.value<3&&ze.value++},Me=()=>{ze.value>1&&ze.value--},Ne=()=>{qe.push("/mon-compte?tab=subscription")},Be=Pe(async e=>{try{await new Promise(e=>setTimeout(e,1e3)),y.success("Votre abonnement a été annulé avec succès"),qe.push("/mon-compte?tab=subscription")}catch(s){x.error(s),y.error("Une erreur est survenue lors de l'annulation")}}),Te=()=>{qe.back()};return(e,s)=>(o(),l(L,null,{default:n(()=>[i("div",U,[i("div",$,[r(d(z),{variant:"ghost",class:"mb-4",onClick:Te},{default:n(()=>[Ve("arrowLeft")?(o(),l(d(V),{key:0,icon:Ve("arrowLeft"),class:"mr-2"},null,8,["icon"])):u("",!0),s[1]||(s[1]=c(" Retour ",-1))]),_:1}),s[2]||(s[2]=i("h1",{class:"text-3xl font-bold",style:{"font-family":"Roboto, sans-serif"}}," Annulation de l'abonnement ",-1)),s[3]||(s[3]=i("p",{class:"text-muted-foreground mt-2"}," Nous sommes désolés de vous voir partir. Aidez-nous à nous améliorer en nous expliquant pourquoi. ",-1))]),i("div",H,[i("div",I,[i("span",Q,"Étape "+f(ze.value)+" sur "+f(3),1),i("span",W,f(Math.round(ze.value/3*100))+"%",1)]),i("div",X,[i("div",{class:"bg-primary h-2 rounded-full transition-all duration-300",style:m({width:ze.value/3*100+"%"})},null,4)])]),i("form",{onSubmit:s[0]||(s[0]=(...e)=>d(Be)&&d(Be)(...e))},[1===ze.value?(o(),l(d(P),{key:0},{default:n(()=>[r(d(N),null,{default:n(()=>[r(d(M),{style:{"font-family":"Roboto, sans-serif"}},{default:n(()=>[...s[4]||(s[4]=[c(" Êtes-vous sûr de vouloir annuler ? ",-1)])]),_:1}),r(d(S),{style:{"font-family":"Roboto, sans-serif"}},{default:n(()=>[...s[5]||(s[5]=[c(" Voici ce que vous allez perdre en annulant votre abonnement ",-1)])]),_:1})]),_:1}),r(d(F),{class:"space-y-6"},{default:n(()=>[i("div",Y,[i("div",Z,[i("span",E,f(Ae.value.plan)+" - "+f(Ae.value.themeName),1),r(d(A),{variant:"default"},{default:n(()=>[...s[6]||(s[6]=[c("Actif",-1)])]),_:1})]),r(d(D)),i("div",O,[i("div",ee,[s[7]||(s[7]=i("span",{class:"text-neutral-600"},"Consultations par mois",-1)),i("span",se,f(Ae.value.quantity),1)]),i("div",ae,[s[8]||(s[8]=i("span",{class:"text-neutral-600"},"Prix mensuel",-1)),i("span",te,f(Ae.value.price)+"€",1)]),i("div",le,[s[9]||(s[9]=i("span",{class:"text-neutral-600"},"Prochain prélèvement",-1)),i("span",ne,f(Ae.value.nextBillingDate),1)])])]),i("div",oe,[s[12]||(s[12]=i("h3",{class:"font-medium text-sm",style:{"font-family":"Roboto, sans-serif"}}," Vous perdrez accès à : ",-1)),i("ul",ie,[i("li",re,[Ve("timesCircle")?(o(),l(d(V),{key:0,icon:Ve("timesCircle"),class:"w-5 h-5 text-destructive mt-0.5"},null,8,["icon"])):u("",!0),i("span",ue,f(Ae.value.quantity)+" consultations exclusives par mois avec nos experts ",1)]),i("li",ce,[Ve("timesCircle")?(o(),l(d(V),{key:0,icon:Ve("timesCircle"),class:"w-5 h-5 text-destructive mt-0.5"},null,8,["icon"])):u("",!0),s[10]||(s[10]=i("span",{class:"text-sm"},"Accès aux analyses détaillées et recommandations personnalisées",-1))]),i("li",de,[Ve("timesCircle")?(o(),l(d(V),{key:0,icon:Ve("timesCircle"),class:"w-5 h-5 text-destructive mt-0.5"},null,8,["icon"])):u("",!0),s[11]||(s[11]=i("span",{class:"text-sm"},"Support prioritaire et réponses rapides",-1))])])]),i("div",fe,[r(d(z),{type:"button",variant:"outline",class:"flex-1",onClick:Ne},{default:n(()=>[...s[13]||(s[13]=[c(" Garder mon abonnement ",-1)])]),_:1}),r(d(z),{type:"button",color:"red",class:"flex-1",onClick:Se},{default:n(()=>[...s[14]||(s[14]=[c(" Continuer l'annulation ",-1)])]),_:1})])]),_:1})]),_:1})):u("",!0),2===ze.value?(o(),l(d(P),{key:1},{default:n(()=>[r(d(N),null,{default:n(()=>[r(d(M),{style:{"font-family":"Roboto, sans-serif"}},{default:n(()=>[...s[15]||(s[15]=[c(" Pourquoi annulez-vous votre abonnement ? ",-1)])]),_:1}),r(d(S),{style:{"font-family":"Roboto, sans-serif"}},{default:n(()=>[...s[16]||(s[16]=[c(" Vos retours nous aident à améliorer nos services ",-1)])]),_:1})]),_:1}),r(d(F),{class:"space-y-6"},{default:n(()=>[r(d(j),{name:"reason"},{default:n(({componentField:e})=>[r(d(B),{class:"space-y-3"},{default:n(()=>[r(d(T),{class:"text-base font-medium"},{default:n(()=>[...s[17]||(s[17]=[c("Sélectionnez une raison *",-1)])]),_:1}),r(d(G),null,{default:n(()=>[i("div",me,[(o(!0),p(b,null,v(d(K),(s,a)=>(o(),p("div",{key:a,class:"flex items-center space-x-3 border rounded-lg p-3 hover:bg-accent cursor-pointer"},[i("input",_({id:`reason-${a}`,type:"radio",value:a},{ref_for:!0},e,{class:"w-4 h-4 text-primary focus:ring-2 focus:ring-primary"}),null,16,pe),i("label",{for:`reason-${a}`,class:"flex-1 cursor-pointer text-sm"},f(s),9,ve)]))),128))])]),_:2},1024),r(d(J))]),_:2},1024)]),_:1}),r(d(j),{name:"feedback"},{default:n(({componentField:e})=>[r(d(B),null,{default:n(()=>[r(d(T),null,{default:n(()=>[...s[18]||(s[18]=[c(" Commentaires supplémentaires (optionnel) ",-1)])]),_:1}),r(d(G),null,{default:n(()=>[i("textarea",_(e,{placeholder:"Dites-nous en plus sur votre décision...",class:"flex min-h-[100px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"}),null,16)]),_:2},1024),r(d(J))]),_:2},1024)]),_:1}),i("div",_e,[r(d(z),{type:"button",variant:"outline",onClick:Me},{default:n(()=>[Ve("arrowLeft")?(o(),l(d(V),{key:0,icon:Ve("arrowLeft"),class:"mr-2"},null,8,["icon"])):u("",!0),s[19]||(s[19]=c(" Retour ",-1))]),_:1}),r(d(z),{type:"button",class:"flex-1",disabled:!d(Fe).reason,onClick:Se},{default:n(()=>[s[20]||(s[20]=c(" Continuer ",-1)),Ve("arrowRight")?(o(),l(d(V),{key:0,icon:Ve("arrowRight"),class:"ml-2"},null,8,["icon"])):u("",!0)]),_:1},8,["disabled"])])]),_:1})]),_:1})):u("",!0),3===ze.value?(o(),l(d(P),{key:2},{default:n(()=>[r(d(N),null,{default:n(()=>[r(d(M),{style:{"font-family":"Roboto, sans-serif"}},{default:n(()=>[...s[21]||(s[21]=[c(" Confirmation de l'annulation ",-1)])]),_:1}),r(d(S),{style:{"font-family":"Roboto, sans-serif"}},{default:n(()=>[...s[22]||(s[22]=[c(" Dernière étape avant d'annuler votre abonnement ",-1)])]),_:1})]),_:1}),r(d(F),{class:"space-y-6"},{default:n(()=>[i("div",be,[i("div",ye,[Ve("infoCircle")?(o(),l(d(V),{key:0,icon:Ve("infoCircle"),class:"w-5 h-5 text-amber-600 mt-0.5"},null,8,["icon"])):u("",!0),i("div",xe,[s[25]||(s[25]=i("p",{class:"text-sm font-medium text-amber-900"}," Votre abonnement sera annulé à la fin de la période en cours ",-1)),i("p",ge,[s[23]||(s[23]=c(" Vous conserverez l'accès à vos consultations jusqu'au ",-1)),i("strong",null,f(Ae.value.nextBillingDate),1),s[24]||(s[24]=c(". Aucun remboursement ne sera effectué. ",-1))])])])]),i("div",he,[s[28]||(s[28]=i("h3",{class:"font-medium text-sm",style:{"font-family":"Roboto, sans-serif"}}," Récapitulatif ",-1)),i("div",Ce,[i("div",null,[s[26]||(s[26]=i("span",{class:"text-neutral-600"},"Raison : ",-1)),i("span",ke,f(d(Fe).reason?d(K)[d(Fe).reason]:"-"),1)]),d(Fe).feedback?(o(),p("div",we,[s[27]||(s[27]=i("span",{class:"text-neutral-600"},"Commentaire : ",-1)),i("p",Re,f(d(Fe).feedback),1)])):u("",!0)])]),i("div",je,[r(d(z),{type:"button",variant:"outline",onClick:Me},{default:n(()=>[Ve("arrowLeft")?(o(),l(d(V),{key:0,icon:Ve("arrowLeft"),class:"mr-2"},null,8,["icon"])):u("",!0),s[29]||(s[29]=c(" Retour ",-1))]),_:1}),r(d(z),{type:"submit",color:"red",class:"flex-1"},{default:n(()=>[Ve("check")?(o(),l(d(V),{key:0,icon:Ve("check"),class:"mr-2"},null,8,["icon"])):u("",!0),s[30]||(s[30]=c(" Confirmer l'annulation ",-1))]),_:1})])]),_:1})]),_:1})):u("",!0)],32)])]),_:1}))}});export{qe as default};
