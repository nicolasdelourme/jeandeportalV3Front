import{n as e,N as l}from"./news.service-C63P7LKh.js";import{b as a,F as s,_ as t,a as i,c as r,d as n}from"./DefaultLayout.vue_vue_type_script_setup_true_lang-Br6uEOr3.js";import{_ as d,a as u}from"./BookmarkButton.vue_vue_type_script_setup_true_lang-DXDfxjsK.js";import{A as o,a as c,a9 as m,G as v,H as f,I as p,U as g,Q as x,L as y,u as h,K as w,V as b,W as _,l as k,m as j,F as S,Z as N,ac as L}from"./vue-vendor-BHZkLje3.js";import{_ as F}from"./Card.vue_vue_type_script_setup_true_lang-BImqj4dv.js";import{_ as A,a as C}from"./SidebarAcademy.vue_vue_type_script_setup_true_lang-Dp_rsDq-.js";import{_ as I}from"./Skeleton.vue_vue_type_script_setup_true_lang-C_McNZtf.js";import{_ as T,L as $}from"./NewsEmptyState.vue_vue_type_script_setup_true_lang-Cs_-YvD5.js";import"./index-BamJDk-5.js";import"./ui-vendor-Dpzf4R5k.js";const z={class:"group relative w-full overflow-hidden rounded-lg"},E={class:"aspect-[16/9] md:aspect-[21/9] overflow-hidden"},D=["src","alt"],R={key:0,class:"absolute inset-0 flex items-center justify-center"},P={class:"w-20 h-20 md:w-24 md:h-24 rounded-full bg-primary/90 flex items-center justify-center ring-8 ring-primary/30 transition-all duration-300 group-hover:scale-110 group-hover:ring-primary/50"},B={class:"absolute bottom-0 left-0 right-0 p-6 md:p-10"},H={class:"max-w-3xl flex flex-col gap-3 md:gap-4"},G={class:"font-heading font-bold text-2xl md:text-4xl lg:text-5xl text-white leading-tight"},U={class:"hidden md:block text-neutral-200 text-lg leading-relaxed line-clamp-2"},V={class:"text-neutral-400 text-sm md:text-base"},Z=o({__name:"NewsHero",props:{item:{}},setup(e){const l=e,t=c(()=>({play:a.fas?.play})),i=c(()=>new Intl.DateTimeFormat("fr-FR",{day:"numeric",month:"long",year:"numeric"}).format(l.item.publishedAt)),r=c(()=>`/actualites/${l.item.slug}`);return(l,a)=>{const n=m("RouterLink");return f(),v(n,{to:r.value,class:"block"},{default:p(()=>[g("article",z,[g("div",E,[g("img",{src:e.item.thumbnail,alt:e.item.title,class:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-105"},null,8,D)]),a[0]||(a[0]=g("div",{class:"absolute inset-0 bg-gradient-to-t from-secondary/95 via-secondary/50 to-transparent"},null,-1)),"video"===e.item.type?(f(),x("div",R,[g("div",P,[t.value.play?(f(),v(h(s),{key:0,icon:t.value.play,class:"w-8 h-8 md:w-10 md:h-10 text-primary-foreground ml-1"},null,8,["icon"])):y("",!0)])])):y("",!0),g("div",B,[g("div",H,[w(d,{type:e.item.type},null,8,["type"]),g("h1",G,b(e.item.title),1),g("p",U,b(e.item.excerpt),1),g("p",V,b(i.value),1)])])])]),_:1},8,["to"])}}}),K={class:"flex flex-col sm:flex-row gap-2"},M={class:"relative w-full sm:w-48 md:w-56 lg:w-64 aspect-video shrink-0 overflow-hidden rounded-md"},Q=["src","alt"],W={key:0,class:"absolute inset-0 flex items-center justify-center"},q={class:"w-12 h-12 rounded-full bg-primary/90 flex items-center justify-center ring-4 ring-primary/30 transition-transform duration-300 group-hover:scale-110"},J={class:"flex flex-col justify-between flex-1 min-w-0"},O={class:"flex flex-col gap-2"},X={class:"flex items-center justify-between"},Y={class:"font-heading font-bold text-lg md:text-xl leading-tight text-secondary line-clamp-2 group-hover:text-primary transition-colors duration-500"},ee={class:"text-muted-foreground text-sm leading-relaxed line-clamp-2 group-hover:text-white/90 transition-colors duration-500"},le={class:"flex items-center gap-3 mt-3 text-xs text-muted-foreground group-hover:text-white/70 transition-colors duration-500"},ae={key:0,class:"flex items-center gap-1"},se=i(o({__name:"NewsCard",props:{item:{}},setup(e){const l=e,i=c(()=>({play:a.fas?.play,clock:a.far?.clock})),r=c(()=>`/actualites/${l.item.slug}`),n=c(()=>new Intl.DateTimeFormat("fr-FR",{day:"numeric",month:"long",year:"numeric"}).format(l.item.publishedAt)),o=c(()=>{if(!l.item.duration)return null;return`${Math.floor(l.item.duration/60)}:${(l.item.duration%60).toString().padStart(2,"0")}`}),k=c(()=>l.item.readTime?`${l.item.readTime} min de lecture`:null);return(l,a)=>{const c=m("RouterLink");return f(),v(c,{to:r.value,class:"block"},{default:p(()=>[w(h(F),{class:"news-card group relative border border-secondary hover:shadow-md rounded-lg overflow-hidden transition-all duration-500 p-2 gap-0"},{default:p(()=>[g("div",K,[g("div",M,[g("img",{src:e.item.thumbnail,alt:e.item.title,class:"absolute inset-0 w-full h-full object-cover transition-transform duration-500 group-hover:scale-105"},null,8,Q),"video"===e.item.type?(f(),x("div",W,[g("div",q,[i.value.play?(f(),v(h(s),{key:0,icon:i.value.play,class:"w-4 h-4 text-primary-foreground ml-0.5"},null,8,["icon"])):y("",!0)])])):y("",!0),o.value?(f(),v(h(t),{key:1,variant:"secondary",class:"absolute bottom-2 right-2 rounded-lg"},{default:p(()=>[_(b(o.value),1)]),_:1})):y("",!0)]),g("div",J,[g("div",O,[g("div",X,[w(d,{type:e.item.type},null,8,["type"]),w(u,{slug:e.item.slug,variant:"button",size:"sm"},null,8,["slug"])]),g("h3",Y,b(e.item.title),1),g("p",ee,b(e.item.excerpt),1)]),g("div",le,[g("span",null,b(n.value),1),k.value?(f(),x("span",ae,[i.value.clock?(f(),v(h(s),{key:0,icon:i.value.clock,class:"w-3 h-3"},null,8,["icon"])):y("",!0),_(" "+b(k.value),1)])):y("",!0)])])])]),_:1})]),_:1},8,["to"])}}}),[["__scopeId","data-v-fea309da"]]),te={class:"flex flex-col gap-4"},ie={key:0,class:"space-y-3"},re={key:1,class:"text-sm text-muted-foreground"},ne={key:2,class:"flex flex-col divide-y divide-neutral-100"},de=o({__name:"SidebarLive",setup(l){const a=k([]),s=k(!0),t=k(null);return j(async()=>{try{a.value=await e.fetchLatest()}catch(l){t.value="Impossible de charger les actualités"}finally{s.value=!1}}),(e,l)=>(f(),x("section",te,[l[1]||(l[1]=g("div",{class:"flex items-center gap-2"},[g("span",{class:"w-2 h-2 rounded-full bg-red-500 animate-pulse","aria-hidden":"true"}),g("h3",{class:"font-heading font-bold text-lg text-secondary"},"En Continu")],-1)),s.value?(f(),x("div",ie,[(f(),x(S,null,N(3,e=>g("div",{key:e,class:"flex gap-3 animate-pulse"},[...l[0]||(l[0]=[g("div",{class:"w-16 h-16 rounded-md bg-neutral-200"},null,-1),g("div",{class:"flex-1 space-y-2"},[g("div",{class:"h-4 bg-neutral-200 rounded w-3/4"}),g("div",{class:"h-3 bg-neutral-200 rounded w-1/2"})],-1)])])),64))])):t.value?(f(),x("p",re,b(t.value),1)):(f(),x("div",ne,[(f(!0),x(S,null,N(a.value.slice(0,3),e=>(f(),v(A,{key:e.id,item:e,"show-new-dot":""},null,8,["item"]))),128))]))]))}}),ue={class:"flex flex-col gap-4"},oe={key:0,class:"space-y-3"},ce={key:1,class:"text-sm text-muted-foreground"},me={key:2,class:"flex flex-col divide-y divide-neutral-100"},ve=o({__name:"SidebarTrending",setup(l){const a=k([]),s=k(!0),t=k(null);return j(async()=>{try{a.value=await e.fetchTrending()}catch(l){t.value="Impossible de charger les tendances"}finally{s.value=!1}}),(e,l)=>(f(),x("section",ue,[l[1]||(l[1]=g("h3",{class:"font-heading font-bold text-lg text-secondary"},"Les Plus Lus",-1)),s.value?(f(),x("div",oe,[(f(),x(S,null,N(5,e=>g("div",{key:e,class:"flex gap-3 animate-pulse"},[...l[0]||(l[0]=[L('<div class="w-8 h-8 rounded bg-neutral-200"></div><div class="w-16 h-16 rounded-md bg-neutral-200"></div><div class="flex-1 space-y-2"><div class="h-4 bg-neutral-200 rounded w-3/4"></div><div class="h-3 bg-neutral-200 rounded w-1/2"></div></div>',3)])])),64))])):t.value?(f(),x("p",ce,b(t.value),1)):(f(),x("div",me,[(f(!0),x(S,null,N(a.value,(e,l)=>(f(),v(A,{key:e.id,item:e,rank:l+1},null,8,["item","rank"]))),128))]))]))}}),fe={class:"flex flex-col gap-8"},pe=o({__name:"NewsSidebar",setup:e=>(e,l)=>(f(),x("aside",fe,[w(de),w(ve),w(C)]))}),ge={class:"relative w-full overflow-hidden rounded-lg"},xe={class:"aspect-video md:aspect-21/9 relative"},ye={class:"absolute bottom-0 left-0 right-0 p-6 md:p-10"},he={class:"max-w-3xl flex flex-col gap-3 md:gap-4"},we={class:"hidden md:flex flex-col gap-2 mt-2"},be=o({__name:"NewsHeroSkeleton",setup:e=>(e,l)=>(f(),x("div",ge,[g("div",xe,[w(h(I),{class:"absolute inset-0 rounded-lg"}),l[0]||(l[0]=g("div",{class:"absolute inset-0 bg-linear-to-t from-secondary/80 via-secondary/30 to-transparent rounded-lg"},null,-1)),g("div",ye,[g("div",he,[w(h(I),{class:"h-6 w-20 rounded-full bg-neutral-300/50"}),w(h(I),{class:"h-10 md:h-14 w-full max-w-2xl rounded bg-neutral-300/50"}),w(h(I),{class:"h-10 md:h-14 w-3/4 max-w-xl rounded bg-neutral-300/50 hidden md:block"}),g("div",we,[w(h(I),{class:"h-5 w-full max-w-lg rounded bg-neutral-300/30"}),w(h(I),{class:"h-5 w-2/3 max-w-md rounded bg-neutral-300/30"})]),w(h(I),{class:"h-4 w-32 rounded bg-neutral-300/30 mt-2"})])])])]))}),_e={class:"flex flex-col sm:flex-row"},ke={class:"relative w-full aspect-video sm:aspect-auto sm:w-48 md:w-56 lg:w-64 shrink-0"},je={class:"flex flex-col justify-between p-4 flex-1 min-w-0"},Se={class:"flex flex-col gap-3"},Ne={class:"space-y-2"},Le={class:"space-y-1.5"},Fe={class:"flex items-center gap-3 mt-4"},Ae=o({__name:"NewsCardSkeleton",setup:e=>(e,l)=>(f(),v(h(F),{class:"overflow-hidden border border-secondary/10 py-0 gap-0"},{default:p(()=>[g("div",_e,[g("div",ke,[w(h(I),{class:"absolute inset-0"})]),g("div",je,[g("div",Se,[w(h(I),{class:"h-5 w-16 rounded-full"}),g("div",Ne,[w(h(I),{class:"h-6 w-full rounded"}),w(h(I),{class:"h-6 w-3/4 rounded"})]),g("div",Le,[w(h(I),{class:"h-4 w-full rounded"}),w(h(I),{class:"h-4 w-5/6 rounded"})])]),g("div",Fe,[w(h(I),{class:"h-3 w-24 rounded"}),w(h(I),{class:"h-3 w-20 rounded"})])])])]),_:1}))}),Ce={class:"flex flex-col gap-8"},Ie={class:"flex flex-col gap-4"},Te={class:"flex items-center gap-2"},$e={class:"flex flex-col divide-y divide-neutral-100"},ze={class:"flex-1 flex flex-col justify-center gap-2"},Ee={class:"flex items-center gap-2"},De={class:"flex flex-col gap-4"},Re={class:"flex flex-col divide-y divide-neutral-100"},Pe={class:"flex-1 flex flex-col justify-center gap-2"},Be={class:"flex items-center gap-2"},He=o({__name:"NewsSidebarSkeleton",setup:e=>(e,l)=>(f(),x("aside",Ce,[g("section",Ie,[g("div",Te,[w(h(I),{class:"w-2 h-2 rounded-full"}),w(h(I),{class:"h-5 w-24 rounded"})]),g("div",$e,[(f(),x(S,null,N(3,e=>g("div",{key:`live-${e}`,class:"flex gap-3 py-2"},[w(h(I),{class:"w-16 h-16 rounded-md shrink-0"}),g("div",ze,[w(h(I),{class:"h-4 w-full rounded"}),g("div",Ee,[w(h(I),{class:"h-3 w-12 rounded-full"}),w(h(I),{class:"h-3 w-14 rounded"})])])])),64))])]),g("section",De,[w(h(I),{class:"h-5 w-28 rounded"}),g("div",Re,[(f(),x(S,null,N(3,e=>g("div",{key:`trending-${e}`,class:"flex gap-3 py-2"},[w(h(I),{class:"w-8 h-8 rounded shrink-0"}),w(h(I),{class:"w-16 h-16 rounded-md shrink-0"}),g("div",Pe,[w(h(I),{class:"h-4 w-full rounded"}),g("div",Be,[w(h(I),{class:"h-3 w-12 rounded-full"}),w(h(I),{class:"h-3 w-14 rounded"})])])])),64))])]),g("section",null,[w(h(I),{class:"h-48 w-full rounded-xl"})])]))}),Ge={class:"min-h-screen bg-white"},Ue={class:"max-w-7xl mx-auto px-4 md:px-8 py-8 md:py-12"},Ve={key:0,class:"space-y-10 md:space-y-14"},Ze={class:"flex flex-col lg:flex-row gap-8 lg:gap-12"},Ke={class:"flex-1 space-y-6"},Me={class:"w-full lg:w-80 shrink-0"},Qe={class:"flex flex-col lg:flex-row gap-4 lg:gap-6"},We={class:"flex-1 min-w-0"},qe={class:"flex flex-col gap-3"},Je={key:1,class:"flex justify-center mt-8"},Oe={key:2,class:"text-center text-muted-foreground text-sm py-8"},Xe={class:"w-full lg:w-80 shrink-0"},Ye={class:"lg:sticky lg:top-24"},el=o({__name:"NewsPage",setup(a){const s=k(null),t=k([]),i=k(!0),d=k(!1),u=k(null),o=k(1),m=k(0),L=l.DEFAULT_PAGE_SIZE,F=c(()=>t.value.length<m.value),A=c(()=>s.value?t.value.filter(e=>e.id!==s.value?.id):t.value),C=async()=>{if(!d.value&&F.value){d.value=!0;try{o.value++;const l=await e.fetchNews({page:o.value,pageSize:L});t.value.push(...l.items)}catch(l){o.value--}finally{d.value=!1}}};return j(async()=>{try{const[l,a]=await Promise.all([e.fetchFeatured(),e.fetchNews({pageSize:L})]);s.value=l,t.value=a.items,m.value=a.total}catch(l){u.value="Impossible de charger les actualites"}finally{i.value=!1}}),(e,l)=>(f(),v(r,null,{default:p(()=>[g("div",Ge,[g("div",Ue,[i.value?(f(),x("div",Ve,[w(be),g("div",Ze,[g("div",Ke,[l[1]||(l[1]=g("div",{class:"h-8 w-48 bg-neutral-200 rounded animate-pulse mb-6"},null,-1)),(f(),x(S,null,N(4,e=>w(Ae,{key:e})),64))]),g("div",Me,[w(He)])])])):u.value?(f(),v(T,{key:1,type:"error",description:u.value,"show-action":"","action-label":"Réessayer",onAction:l[0]||(l[0]=l=>e.$router.go(0))},null,8,["description"])):(f(),x(S,{key:2},[s.value?(f(),v(Z,{key:0,item:s.value,class:"mb-10 md:mb-14"},null,8,["item"])):y("",!0),g("div",Qe,[g("main",We,[l[2]||(l[2]=g("h2",{class:"font-heading font-bold text-2xl text-secondary mb-6"}," Toutes les actualites ",-1)),g("div",qe,[(f(!0),x(S,null,N(A.value,e=>(f(),v(se,{key:e.id,item:e},null,8,["item"]))),128))]),0===A.value.length?(f(),v(T,{key:0,type:"feed"})):y("",!0),F.value?(f(),x("div",Je,[w(h(n),{variant:"outline",rounded:"lg",size:"lg",class:"text-secondary hover:text-secondary",disabled:d.value,onClick:C},{default:p(()=>[d.value?(f(),v(h($),{key:0,class:"w-4 h-4 animate-spin mr-2"})):y("",!0),_(" "+b(d.value?"Chargement...":"Charger plus d'articles"),1)]),_:1},8,["disabled"])])):A.value.length>0?(f(),x("p",Oe," Vous avez vu toutes les actualites ")):y("",!0)]),g("div",Xe,[g("div",Ye,[w(pe)])])])],64))])])]),_:1}))}});export{el as default};
