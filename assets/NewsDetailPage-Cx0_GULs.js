import{A as e,l,a,Q as t,H as s,K as u,u as r,I as n,U as i,G as o,L as c,W as d,V as v,a5 as m,m as p,ae as f,w as g,F as y,Z as h,ad as x}from"./vue-vendor-BHZkLje3.js";import{n as b}from"./news.service-C63P7LKh.js";import{b as _,F as w,h as k,i as j,j as A,c as I,d as F,_ as z,e as D}from"./DefaultLayout.vue_vue_type_script_setup_true_lang-Br6uEOr3.js";import{_ as T,a as L}from"./BookmarkButton.vue_vue_type_script_setup_true_lang-DXDfxjsK.js";import{_ as $}from"./AspectRatio.vue_vue_type_script_setup_true_lang-CQwfCPqO.js";import{_ as C,a as R}from"./SidebarAcademy.vue_vue_type_script_setup_true_lang-Dp_rsDq-.js";import{_ as B}from"./ProseContent.vue_vue_type_script_setup_true_lang-C3kaKXuf.js";import"./index-BamJDk-5.js";import"./ui-vendor-Dpzf4R5k.js";import"./TableHeader.vue_vue_type_script_setup_true_lang-mEEMBt15.js";import"./Skeleton.vue_vue_type_script_setup_true_lang-C_McNZtf.js";import"./index-j_h2RxZR.js";import"./AlertTitle.vue_vue_type_script_setup_true_lang-3SqVJcCT.js";const N={class:"relative w-full overflow-hidden rounded-lg bg-neutral-900"},S=["aria-label"],V=["src","alt"],P={class:"absolute inset-0 flex items-center justify-center"},Y={class:"w-20 h-20 md:w-24 md:h-24 rounded-full bg-primary/90 flex items-center justify-center ring-8 ring-primary/30 transition-all duration-300 group-hover:scale-110 group-hover:ring-primary/50"},H=["src","title"],M=e({__name:"VideoEmbed",props:{youtubeId:{},title:{}},setup(e){const d=e,v=l(!1),m=a(()=>({play:_.fas?.play})),p=a(()=>`https://img.youtube.com/vi/${d.youtubeId}/maxresdefault.jpg`),f=a(()=>`https://www.youtube.com/embed/${d.youtubeId}?autoplay=1&rel=0`),g=()=>{v.value=!0};return(l,a)=>(s(),t("div",N,[u(r($),{ratio:16/9},{default:n(()=>[v.value?(s(),t("iframe",{key:1,src:f.value,title:e.title||"Vidéo YouTube",class:"absolute inset-0 w-full h-full",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowfullscreen:""},null,8,H)):(s(),t("button",{key:0,type:"button",class:"absolute inset-0 w-full h-full cursor-pointer group","aria-label":`Lire la vidéo : ${e.title||"Vidéo YouTube"}`,onClick:g},[i("img",{src:p.value,alt:e.title||"Aperçu vidéo",class:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-105"},null,8,V),a[0]||(a[0]=i("div",{class:"absolute inset-0 bg-secondary/30 transition-colors group-hover:bg-secondary/20"},null,-1)),i("div",P,[i("div",Y,[m.value.play?(s(),o(r(w),{key:0,icon:m.value.play,class:"w-8 h-8 md:w-10 md:h-10 text-primary-foreground ml-1"},null,8,["icon"])):c("",!0)])])],8,S))]),_:1})]))}}),U={class:"flex items-center gap-2"},E={key:0,class:"text-base font-medium text-muted-foreground"},G=e({__name:"AuthorBadge",props:{author:{},size:{default:"md"},showName:{type:Boolean,default:!0}},setup(e){const l=e,i=a(()=>{const e=l.author.name.trim().split(/\s+/);return e.length>=2?`${e[0][0]}${e[e.length-1][0]}`.toUpperCase():l.author.name.slice(0,2).toUpperCase()}),p=a(()=>{switch(l.size){case"sm":return"size-6 text-xs";case"lg":return"size-10 text-base";default:return"size-8 text-sm"}});return(l,a)=>(s(),t("div",U,[u(r(A),{class:m(p.value)},{default:n(()=>[e.author.avatar?(s(),o(r(k),{key:0,src:e.author.avatar,alt:e.author.name},null,8,["src","alt"])):c("",!0),u(r(j),{class:"bg-neutral-200 text-neutral-600 font-medium"},{default:n(()=>[d(v(i.value),1)]),_:1})]),_:1},8,["class"]),e.showName?(s(),t("span",E,v(e.author.name),1)):c("",!0)]))}}),J={class:"min-h-screen bg-white"},K={class:"max-w-7xl mx-auto px-4 md:px-8 py-8 md:py-12"},Q={key:0,class:"max-w-4xl mx-auto space-y-6 animate-pulse"},W={key:1,class:"flex flex-col items-center justify-center py-20 text-center"},Z={class:"text-lg text-muted-foreground mb-4"},q={key:2,class:"flex flex-col lg:flex-row gap-8 lg:gap-12"},O={class:"flex-1 min-w-0 max-w-4xl"},X={class:"mb-8"},ee={class:"flex items-center justify-between mb-4"},le={class:"font-heading font-bold text-3xl md:text-4xl lg:text-5xl text-secondary leading-tight mb-4"},ae={class:"flex flex-wrap items-center gap-4 text-sm text-muted-foreground"},te={class:"flex items-center gap-1"},se={key:0,class:"flex items-center gap-1"},ue={key:1,class:"flex items-center gap-1"},re={class:"flex flex-wrap items-center gap-4 mb-8 pb-6 border-b border-neutral-200"},ne={key:0,class:"text-sm text-muted-foreground"},ie={class:"prose prose-lg prose-neutral max-w-none mb-8"},oe={class:"text-neutral-700 leading-relaxed"},ce={key:0,class:"mt-8"},de={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},ve=["src","alt"],me={class:"text-xl text-neutral-500 leading-relaxed mb-8 font-medium"},pe={key:0,class:"bg-white rounded-lg"},fe={key:2,class:"flex flex-col md:flex-row gap-6"},ge={class:"flex-1"},ye={class:"text-lg text-neutral-600 leading-relaxed mb-6 font-medium"},he={key:0},xe={class:"md:w-48 lg:w-56 shrink-0"},be=["src","alt"],_e={class:"w-full lg:w-80 shrink-0"},we={class:"lg:sticky lg:top-24 space-y-8"},ke={key:0},je={class:"flex flex-col divide-y divide-neutral-100"},Ae=e({__name:"NewsDetailPage",setup(e){const m=f(),k=x(),j=l(null),A=l([]),$=l(!0),N=l(null),S=a(()=>({arrowLeft:_.fas?.["arrow-left"],clock:_.far?.clock,user:_.fas?.user,calendar:_.fas?.calendar,play:_.fas?.play,share:_.fas?.["share-nodes"]})),V=a(()=>j.value?new Intl.DateTimeFormat("fr-FR",{day:"numeric",month:"long",year:"numeric"}).format(j.value.publishedAt):""),P=a(()=>j.value?new Intl.DateTimeFormat("fr-FR",{hour:"2-digit",minute:"2-digit"}).format(j.value.publishedAt):""),Y=a(()=>{if(!j.value?.updatedAt)return null;const e=j.value.publishedAt,l=j.value.updatedAt;return e.getFullYear()===l.getFullYear()&&e.getMonth()===l.getMonth()&&e.getDate()===l.getDate()?null:new Intl.DateTimeFormat("fr-FR",{day:"numeric",month:"long",year:"numeric"}).format(l)}),H=a(()=>{if(!j.value?.duration)return null;return`${Math.floor(j.value.duration/60)}:${(j.value.duration%60).toString().padStart(2,"0")}`}),U=async e=>{$.value=!0,N.value=null;try{j.value=await b.fetchNewsItem(e);const l=await b.fetchNews({pageSize:6});A.value=l.items.filter(e=>e.id!==j.value?.id).slice(0,4)}catch(l){N.value="Actualité non trouvée"}finally{$.value=!1}},E=()=>{k.push("/actualites")};return p(()=>{const e=m.params.slug;e&&U(e)}),g(()=>m.params.slug,e=>{e&&"string"==typeof e&&U(e)}),(e,l)=>(s(),o(I,null,{default:n(()=>[i("div",J,[i("div",K,[u(r(F),{variant:"ghost",size:"sm",class:"mb-6 -ml-2 text-muted-foreground hover:text-secondary",onClick:E},{default:n(()=>[S.value.arrowLeft?(s(),o(r(w),{key:0,icon:S.value.arrowLeft,class:"w-4 h-4 mr-2"},null,8,["icon"])):c("",!0),l[0]||(l[0]=d(" Retour aux actualités ",-1))]),_:1}),$.value?(s(),t("div",Q,[...l[1]||(l[1]=[i("div",{class:"h-6 bg-neutral-200 rounded w-24"},null,-1),i("div",{class:"h-12 bg-neutral-200 rounded w-3/4"},null,-1),i("div",{class:"h-4 bg-neutral-200 rounded w-48"},null,-1),i("div",{class:"aspect-video bg-neutral-200 rounded-xl"},null,-1),i("div",{class:"space-y-3"},[i("div",{class:"h-4 bg-neutral-200 rounded w-full"}),i("div",{class:"h-4 bg-neutral-200 rounded w-full"}),i("div",{class:"h-4 bg-neutral-200 rounded w-2/3"})],-1)])])):N.value?(s(),t("div",W,[i("p",Z,v(N.value),1),u(r(F),{variant:"default",onClick:E},{default:n(()=>[...l[2]||(l[2]=[d(" Retour aux actualités ",-1)])]),_:1})])):j.value?(s(),t("div",q,[i("article",O,[i("header",X,[i("div",ee,[u(T,{type:j.value.type},null,8,["type"]),u(L,{slug:j.value.slug,variant:"button"},null,8,["slug"])]),i("h1",le,v(j.value.title),1),j.value.author?(s(),o(G,{key:0,author:j.value.author,class:"mb-2"},null,8,["author"])):c("",!0),i("div",ae,[i("span",te,[S.value.calendar?(s(),o(r(w),{key:0,icon:S.value.calendar,class:"w-3.5 h-3.5"},null,8,["icon"])):c("",!0),d(" "+v(V.value)+" à "+v(P.value)+" ",1),Y.value?(s(),t(y,{key:1},[d(" (mis à jour le "+v(Y.value)+") ",1)],64)):c("",!0)]),j.value.readTime?(s(),t("span",se,[S.value.clock?(s(),o(r(w),{key:0,icon:S.value.clock,class:"w-3.5 h-3.5"},null,8,["icon"])):c("",!0),d(" "+v(j.value.readTime)+" min de lecture ",1)])):c("",!0),H.value?(s(),t("span",ue,[S.value.clock?(s(),o(r(w),{key:0,icon:S.value.clock,class:"w-3.5 h-3.5"},null,8,["icon"])):c("",!0),d(" "+v(H.value),1)])):c("",!0)])]),"video"===j.value.type&&j.value.youtubeId?(s(),t(y,{key:0},[u(M,{"youtube-id":j.value.youtubeId,title:j.value.title,class:"mb-6"},null,8,["youtube-id","title"]),i("div",re,[u(r(z),{variant:"secondary",class:"gap-1.5"},{default:n(()=>[S.value.play?(s(),o(r(w),{key:0,icon:S.value.play,class:"w-3 h-3"},null,8,["icon"])):c("",!0),l[3]||(l[3]=d(" Vidéo ",-1))]),_:1}),H.value?(s(),t("span",ne," Durée : "+v(H.value),1)):c("",!0),l[5]||(l[5]=i("div",{class:"flex-1"},null,-1)),u(r(F),{variant:"outline",size:"sm",class:"gap-2"},{default:n(()=>[S.value.share?(s(),o(r(w),{key:0,icon:S.value.share,class:"w-4 h-4"},null,8,["icon"])):c("",!0),l[4]||(l[4]=d(" Partager ",-1))]),_:1})]),i("div",ie,[l[6]||(l[6]=i("h2",{class:"font-heading text-xl text-secondary mb-4"},"À propos de cette vidéo",-1)),i("p",oe,v(j.value.excerpt),1)]),A.value.filter(e=>"video"===e.type).length>0?(s(),t("div",ce,[u(r(D),{class:"mb-8"}),l[7]||(l[7]=i("h2",{class:"font-heading font-bold text-xl text-secondary mb-6"}," Plus de vidéos ",-1)),i("div",de,[(s(!0),t(y,null,h(A.value.filter(e=>"video"===e.type).slice(0,4),e=>(s(),o(C,{key:e.id,item:e},null,8,["item"]))),128))])])):c("",!0)],64)):"article"===j.value.type?(s(),t(y,{key:1},[i("img",{src:j.value.thumbnail,alt:j.value.title,class:"w-full aspect-video object-cover rounded-lg mb-8"},null,8,ve),i("p",me,v(j.value.excerpt),1),j.value.content?(s(),t("div",pe,[u(r(B),{html:j.value.content},null,8,["html"])])):c("",!0)],64)):"brief"===j.value.type?(s(),t("div",fe,[i("div",ge,[i("p",ye,v(j.value.excerpt),1),j.value.content?(s(),t("div",he,[u(r(B),{html:j.value.content},null,8,["html"])])):c("",!0)]),i("div",xe,[i("img",{src:j.value.thumbnail,alt:j.value.title,class:"w-full aspect-4/3 object-cover rounded-lg"},null,8,be)])])):c("",!0)]),i("aside",_e,[i("div",we,[u(R),A.value.length>0?(s(),t("div",ke,[l[8]||(l[8]=i("h3",{class:"font-heading font-bold text-lg text-secondary mb-4"}," À lire aussi ",-1)),i("div",je,[(s(!0),t(y,null,h(A.value,e=>(s(),o(C,{key:e.id,item:e},null,8,["item"]))),128))])])):c("",!0)])])])):c("",!0)])])]),_:1}))}});export{Ae as default};
