import{A as e,a as t,l as a,G as l,I as s,H as n,U as o,K as u,L as i,W as r,u as d,V as c,R as f,ag as p,Q as v,Z as m,F as b,a5 as _,ad as g}from"./vue-vendor-BHZkLje3.js";import{b as y,c as x,F as w,d as h,_ as k}from"./DefaultLayout.vue_vue_type_script_setup_true_lang-Br6uEOr3.js";import{_ as C}from"./Card.vue_vue_type_script_setup_true_lang-BImqj4dv.js";import{_ as j}from"./CardContent.vue_vue_type_script_setup_true_lang-CzZI-ZF8.js";import{_ as R}from"./CardDescription.vue_vue_type_script_setup_true_lang-Cw5K8ggb.js";import{_ as I,a as D}from"./CardTitle.vue_vue_type_script_setup_true_lang-CCW9Rm4y.js";import{_ as S,a as T,b as A,c as U,d as L,e as M}from"./TableHeader.vue_vue_type_script_setup_true_lang-mEEMBt15.js";import"./index-BamJDk-5.js";import"./ui-vendor-Dpzf4R5k.js";const F={class:"container max-w-6xl mx-auto py-8 px-4"},P={class:"mb-6"},z={class:"grid gap-4 md:grid-cols-3 mb-6"},H={class:"flex items-center justify-between"},Z={class:"text-2xl font-bold",style:{"font-family":"Roboto, sans-serif"}},V={class:"flex items-center justify-between"},E={class:"text-2xl font-bold",style:{"font-family":"Roboto, sans-serif"}},K={class:"flex items-center justify-between"},Y={class:"text-2xl font-bold",style:{"font-family":"Roboto, sans-serif"}},q={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},G={class:"flex gap-3"},N=["value"],O={class:"hidden md:block"},Q={key:1,class:"text-center py-12"},W={class:"md:hidden space-y-4"},B={class:"space-y-3"},J={class:"flex items-center justify-between"},X={class:"font-semibold text-lg"},$={class:"text-sm space-y-1"},ee={class:"text-muted-foreground"},te={class:"text-muted-foreground"},ae={class:"text-muted-foreground"},le={key:0,class:"text-center py-12"},se=e({__name:"SubscriptionInvoices",setup(e){const se=g(),ne=t(()=>({arrowLeft:y.fas?.["arrow-left"],arrowRight:y.fas?.["arrow-right"],fileInvoice:y.fas?.["file-invoice"],euroSign:y.fas?.["euro-sign"],creditCard:y.fas?.["credit-card"],download:y.fas?.download})),oe=e=>ne.value[e],ue=a([{id:"1",subscriptionId:"sub-123",date:"2024-11-10",period:"Novembre 2024",amount:75,status:"paid",pdfUrl:"/invoices/inv-001.pdf",paymentMethod:"Carte •••• 1234",createdAt:"2024-11-10T10:00:00Z"},{id:"2",subscriptionId:"sub-123",date:"2024-10-10",period:"Octobre 2024",amount:75,status:"paid",pdfUrl:"/invoices/inv-002.pdf",paymentMethod:"Carte •••• 1234",createdAt:"2024-10-10T10:00:00Z"},{id:"3",subscriptionId:"sub-123",date:"2024-09-10",period:"Septembre 2024",amount:100,status:"paid",pdfUrl:"/invoices/inv-003.pdf",paymentMethod:"Carte •••• 1234",createdAt:"2024-09-10T10:00:00Z"}]),ie=a("all"),re=a("all"),de=t(()=>{const e=new Set(ue.value.map(e=>new Date(e.date).getFullYear().toString()));return["all",...Array.from(e).sort().reverse()]}),ce=t(()=>ue.value.filter(e=>{const t="all"===ie.value||new Date(e.date).getFullYear().toString()===ie.value,a="all"===re.value||e.status===re.value;return t&&a})),fe=t(()=>ce.value.reduce((e,t)=>e+t.amount,0)),pe=e=>{const t={paid:{label:"Payée",variant:"default",class:"bg-green-500"},pending:{label:"En attente",variant:"secondary",class:""},failed:{label:"Échouée",variant:"destructive",class:""},refunded:{label:"Remboursée",variant:"outline",class:""}};return t[e]||t.pending},ve=e=>{window.open(e.pdfUrl,"_blank")},me=()=>{se.push("/mon-compte?tab=subscription")};return(e,t)=>(n(),l(x,null,{default:s(()=>[o("div",F,[o("div",P,[u(d(h),{variant:"ghost",class:"mb-4",onClick:me},{default:s(()=>[oe("arrowLeft")?(n(),l(d(w),{key:0,icon:oe("arrowLeft"),class:"mr-2"},null,8,["icon"])):i("",!0),t[2]||(t[2]=r(" Retour à Mon Compte ",-1))]),_:1}),t[3]||(t[3]=o("div",{class:"flex items-center justify-between"},[o("div",null,[o("h1",{class:"text-3xl font-bold",style:{"font-family":"Roboto, sans-serif"}}," Factures d'abonnement "),o("p",{class:"text-muted-foreground mt-2"}," Consultez et téléchargez vos factures d'abonnement ")])],-1))]),o("div",z,[u(d(C),null,{default:s(()=>[u(d(j),{class:"pt-6"},{default:s(()=>[o("div",H,[o("div",null,[t[4]||(t[4]=o("p",{class:"text-sm text-muted-foreground"},"Total des factures",-1)),o("p",Z,c(ce.value.length),1)]),oe("fileInvoice")?(n(),l(d(w),{key:0,icon:oe("fileInvoice"),class:"w-8 h-8 text-primary"},null,8,["icon"])):i("",!0)])]),_:1})]),_:1}),u(d(C),null,{default:s(()=>[u(d(j),{class:"pt-6"},{default:s(()=>[o("div",V,[o("div",null,[t[5]||(t[5]=o("p",{class:"text-sm text-muted-foreground"},"Montant total",-1)),o("p",E,c(fe.value)+"€ ",1)]),oe("euroSign")?(n(),l(d(w),{key:0,icon:oe("euroSign"),class:"w-8 h-8 text-green-600"},null,8,["icon"])):i("",!0)])]),_:1})]),_:1}),u(d(C),null,{default:s(()=>[u(d(j),{class:"pt-6"},{default:s(()=>[o("div",K,[o("div",null,[t[6]||(t[6]=o("p",{class:"text-sm text-muted-foreground"},"Dernier paiement",-1)),o("p",Y,c(ue.value[0]?.amount)+"€ ",1)]),oe("creditCard")?(n(),l(d(w),{key:0,icon:oe("creditCard"),class:"w-8 h-8 text-blue-600"},null,8,["icon"])):i("",!0)])]),_:1})]),_:1})]),u(d(C),null,{default:s(()=>[u(d(I),null,{default:s(()=>[o("div",q,[o("div",null,[u(d(D),{style:{"font-family":"Roboto, sans-serif"}},{default:s(()=>[...t[7]||(t[7]=[r(" Historique des factures ",-1)])]),_:1}),u(d(R),{style:{"font-family":"Roboto, sans-serif"}},{default:s(()=>[...t[8]||(t[8]=[r(" Liste complète de vos factures d'abonnement ",-1)])]),_:1})]),o("div",G,[f(o("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>ie.value=e),class:"flex h-10 w-[140px] rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},[t[9]||(t[9]=o("option",{value:"all"},"Toutes",-1)),(n(!0),v(b,null,m(de.value.slice(1),e=>(n(),v("option",{key:e,value:e},c(e),9,N))),128))],512),[[p,ie.value]]),f(o("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>re.value=e),class:"flex h-10 w-[140px] rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},[...t[10]||(t[10]=[o("option",{value:"all"},"Tous",-1),o("option",{value:"paid"},"Payées",-1),o("option",{value:"pending"},"En attente",-1),o("option",{value:"failed"},"Échouées",-1),o("option",{value:"refunded"},"Remboursées",-1)])],512),[[p,re.value]])])])]),_:1}),u(d(j),null,{default:s(()=>[o("div",O,[ce.value.length>0?(n(),l(d(S),{key:0},{default:s(()=>[u(d(T),null,{default:s(()=>[u(d(A),null,{default:s(()=>[u(d(U),null,{default:s(()=>[...t[11]||(t[11]=[r("Date",-1)])]),_:1}),u(d(U),null,{default:s(()=>[...t[12]||(t[12]=[r("Période",-1)])]),_:1}),u(d(U),null,{default:s(()=>[...t[13]||(t[13]=[r("Montant",-1)])]),_:1}),u(d(U),null,{default:s(()=>[...t[14]||(t[14]=[r("Statut",-1)])]),_:1}),u(d(U),null,{default:s(()=>[...t[15]||(t[15]=[r("Paiement",-1)])]),_:1}),u(d(U),{class:"text-right"},{default:s(()=>[...t[16]||(t[16]=[r("Actions",-1)])]),_:1})]),_:1})]),_:1}),u(d(L),null,{default:s(()=>[(n(!0),v(b,null,m(ce.value,e=>(n(),l(d(A),{key:e.id},{default:s(()=>[u(d(M),{class:"font-medium"},{default:s(()=>[r(c(new Date(e.date).toLocaleDateString("fr-FR")),1)]),_:2},1024),u(d(M),null,{default:s(()=>[r(c(e.period),1)]),_:2},1024),u(d(M),{class:"font-semibold"},{default:s(()=>[r(c(e.amount)+"€",1)]),_:2},1024),u(d(M),null,{default:s(()=>[u(d(k),{variant:pe(e.status).variant,class:_(pe(e.status).class)},{default:s(()=>[r(c(pe(e.status).label),1)]),_:2},1032,["variant","class"])]),_:2},1024),u(d(M),{class:"text-sm text-muted-foreground"},{default:s(()=>[r(c(e.paymentMethod),1)]),_:2},1024),u(d(M),{class:"text-right"},{default:s(()=>[u(d(h),{variant:"outline",size:"sm",disabled:!e.pdfUrl,onClick:t=>ve(e)},{default:s(()=>[oe("download")?(n(),l(d(w),{key:0,icon:oe("download"),class:"mr-2"},null,8,["icon"])):i("",!0),t[17]||(t[17]=r(" Télécharger ",-1))]),_:1},8,["disabled","onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})):(n(),v("div",Q,[oe("fileInvoice")?(n(),l(d(w),{key:0,icon:oe("fileInvoice"),class:"w-12 h-12 text-muted-foreground mx-auto mb-4"},null,8,["icon"])):i("",!0),t[18]||(t[18]=o("p",{class:"text-muted-foreground"},"Aucune facture trouvée",-1))]))]),o("div",W,[(n(!0),v(b,null,m(ce.value,e=>(n(),l(d(C),{key:e.id,class:_(["border-l-4",{"border-l-green-500":"paid"===e.status,"border-l-yellow-500":"pending"===e.status,"border-l-red-500":"failed"===e.status,"border-l-gray-500":"refunded"===e.status}])},{default:s(()=>[u(d(j),{class:"pt-6"},{default:s(()=>[o("div",B,[o("div",J,[o("span",X,c(e.amount)+"€",1),u(d(k),{variant:pe(e.status).variant,class:_(pe(e.status).class)},{default:s(()=>[r(c(pe(e.status).label),1)]),_:2},1032,["variant","class"])]),o("div",$,[o("p",ee,[t[19]||(t[19]=o("strong",null,"Période :",-1)),r(" "+c(e.period),1)]),o("p",te,[t[20]||(t[20]=o("strong",null,"Date :",-1)),r(" "+c(new Date(e.date).toLocaleDateString("fr-FR")),1)]),o("p",ae,[t[21]||(t[21]=o("strong",null,"Paiement :",-1)),r(" "+c(e.paymentMethod),1)])]),u(d(h),{variant:"outline",size:"sm",disabled:!e.pdfUrl,class:"w-full",onClick:t=>ve(e)},{default:s(()=>[oe("download")?(n(),l(d(w),{key:0,icon:oe("download"),class:"mr-2"},null,8,["icon"])):i("",!0),t[22]||(t[22]=r(" Télécharger la facture ",-1))]),_:1},8,["disabled","onClick"])])]),_:2},1024)]),_:2},1032,["class"]))),128)),0===ce.value.length?(n(),v("div",le,[oe("fileInvoice")?(n(),l(d(w),{key:0,icon:oe("fileInvoice"),class:"w-12 h-12 text-muted-foreground mx-auto mb-4"},null,8,["icon"])):i("",!0),t[23]||(t[23]=o("p",{class:"text-muted-foreground"},"Aucune facture trouvée",-1))])):i("",!0)])]),_:1})]),_:1})])]),_:1}))}});export{se as default};
