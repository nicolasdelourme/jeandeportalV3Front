import{A as e,l as t,m as s,ae as a,G as o,I as r,H as l,K as n,Q as c,U as i,V as u,u as v,ad as p}from"./vue-vendor-BHZkLje3.js";import{a as d,g as m,t as f}from"./index-BamJDk-5.js";import{c as y,d as x}from"./DefaultLayout.vue_vue_type_script_setup_true_lang-Br6uEOr3.js";import{_ as h}from"./AuthFormWrapper.vue_vue_type_script_setup_true_lang-B8TL4y5H.js";import"./ui-vendor-Dpzf4R5k.js";import"./index-j_h2RxZR.js";const g={key:0,class:"space-y-6 text-center py-8"},w={key:1,class:"space-y-6 text-center py-4"},_={class:"space-y-2"},k={class:"text-neutral-600"},V={key:2,class:"space-y-6 text-center py-4"},j={class:"space-y-2"},z={class:"text-neutral-600"},b={class:"space-y-3"},C=e({__name:"VerifyEmailPage",setup(e){const C=a(),A=p(),L=d(),E=t(!0),M=t(!1),B=t("");s(async()=>{const e=C.params.token;if("demo"===e)return E.value=!1,M.value=!0,void(B.value="Votre compte a été activé avec succès. Vous pouvez maintenant vous connecter.");if(!e)return E.value=!1,M.value=!1,void(B.value="Le lien de vérification est invalide. Aucun token fourni.");try{const t=await L.verifyEmail(e);M.value="success"===t.status,M.value?B.value="Votre compte a été activé avec succès. Vous pouvez maintenant vous connecter.":B.value=t.message||"Le lien de vérification est invalide ou a expiré."}catch(t){M.value=!1,B.value=m(t)}finally{E.value=!1}});const H=()=>{M.value&&f.success("Votre compte a été activé ! Vous pouvez vous connecter."),A.push("/auth?mode=login")};return(e,t)=>(l(),o(y,null,{default:r(()=>[n(h,{title:E.value?"Vérification en cours...":M.value?"Email vérifié !":"Erreur de vérification",subtitle:""},{default:r(()=>[E.value?(l(),c("div",g,[...t[0]||(t[0]=[i("div",{class:"mx-auto w-16 h-16 flex items-center justify-center"},[i("svg",{class:"animate-spin w-10 h-10 text-primary",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[i("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),i("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})])],-1),i("p",{class:"text-neutral-600"},"Vérification de votre email en cours...",-1)])])):M.value?(l(),c("div",w,[t[2]||(t[2]=i("div",{class:"mx-auto w-16 h-16 bg-green-100 rounded-full flex items-center justify-center"},[i("svg",{class:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})])],-1)),i("div",_,[i("p",k,u(B.value),1)]),n(v(x),{type:"button",color:"primary",rounded:"lg",size:"lg",class:"w-full text-secondary hover:text-secondary",onClick:H},{default:r(()=>[...t[1]||(t[1]=[i("span",{class:"font-bold"},"Se connecter",-1)])]),_:1})])):(l(),c("div",V,[t[4]||(t[4]=i("div",{class:"mx-auto w-16 h-16 bg-red-100 rounded-full flex items-center justify-center"},[i("svg",{class:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})])],-1)),i("div",j,[i("p",z,u(B.value),1)]),i("div",b,[n(v(x),{type:"button",color:"primary",size:"lg",rounded:"lg",class:"w-full text-secondary hover:text-secondary",onClick:H},{default:r(()=>[...t[3]||(t[3]=[i("span",{class:"font-bold"},"Retour à la connexion",-1)])]),_:1})]),t[5]||(t[5]=i("p",{class:"text-xs text-neutral-500"}," Si le problème persiste, essayez de vous réinscrire ou contactez le support. ",-1))]))]),_:1},8,["title"])]),_:1}))}});export{C as default};
